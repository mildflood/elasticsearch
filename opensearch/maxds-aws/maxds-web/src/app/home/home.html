<div>
        <p-progressSpinner *ngIf="progressSpinner" [style]="{width: '50px', height: '50px',float:'left'}"
                strokeWidth="8" fill="#EEEEEE" animationDuration=".5s"></p-progressSpinner>
        <p-messages [value]="msgs"></p-messages>
</div>
<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
<div *ngIf="showError" class="alert alert-danger" role="alert">
        <strong>{{errorMsg}}</strong>
</div>
<div *ngIf="processnow" style="border-style: solid;">
        <div class="row">
                <div class="column1">

                        <label>
                                Division -> Sector:</label>

                </div>
                <div class="column2">
                        <p-dropdown [options]="filtereddivSector" placeholder="Select Division Sector"
                                [(ngModel)]="divSector" [style]="{'width':'800px'}" dropdownIcon="pi pi-chevron-down"
                                (onChange)="divSectorChange($event)" [virtualScroll]="true" [itemSize]="31"
                                filter="true"></p-dropdown>
                        &nbsp; {{divisionCount}}
                </div>
        </div>
        <div class="row" style="height: 5px"></div>
        <div class="row">
                <div class="column1">
                        <label>Industry: </label>
                </div>
                <div class="column2">
                        <p-dropdown [options]="filteredindustry" [(ngModel)]="industry" placeholder="Select Industry"
                                [showClear]="true" (onChange)="processIndustryChange($event)" [virtualScroll]="true"
                                [itemSize]="31" filter="true" [style]="{'width':'800px'}"></p-dropdown>
                        &nbsp; {{sectorCount}}
                </div>
        </div>
        <div class="row" style="height: 5px"></div>
        <div class="row">
                <div class="column1">
                        <label>Filer Category:</label>

                </div>
                <div class="column2">

                        <p-dropdown [options]="filteredfilerCategory" [(ngModel)]="filerCategory"
                                placeholder="Select Filer Category" [showClear]="true"
                                (onChange)="processfilCatChange($event)" [virtualScroll]="true" [itemSize]="31"
                                filter="true" [style]="{'width':'800px'}"></p-dropdown>&nbsp; {{categoryCount}}
                </div>

        </div>
        <div class="row">
                <div class="column1">

                </div>
                <div class="column2">
                        <button pButton type="button" label="Process Now" class=" ui-button-rounded ui-button-success"
                                [disabled]="enableTermButton" (click)="processNow()"></button>
                </div>
        </div>
</div>

<div class="row" style="height:70%">

        <div class="exprcolumn" style="width: 20%;">
                <!-- <p-sidebar [(visible)]="display" [dismissible] ="false" [showCloseIcon]="false" autoZIndex="false" [baseZIndex]="10000" [style]="{width:'30em','overflow': 'scroll','height': '500px'}" [modal]="false"> -->
                <p-tree [value]="termTree" [filter]="true"
                        [style]="{width:'27em','text-align':'left','max-height':'800px', 'overflow':'auto'}"
                        filterMode="strict" (onNodeSelect)="termTreeSelection($event)" selectionMode="single"
                        [(selection)]="selectedTerm" (onNodeUnselect)="termTreeunselect($event)"></p-tree>
                <!-- </p-sidebar> -->


        </div>
        <div class="exprcolumn" style="float: left; width: 80%;">
                <div class="row">


                        <div class="exprcolumn" style="float: left; width: 50%;">
                                <div class="row">
                                        <div class="column1">
                                                &nbsp;
                                        </div>
                                        <div class="column">
                                                <button pButton type="button" label="Add Term" class="ui-button-rounded"
                                                        (click)="addTerm()"></button>
                                                <button pButton type="button" label="Save Term"
                                                        class="ui-button-rounded" [disabled]="enableTermButton"
                                                        (click)="saveTerm()"></button>
                                                <button pButton type="button" label="Process Term"
                                                        class="ui-button-rounded" [disabled]="enableTermButton"
                                                        (click)="processTermnow()"></button>
                                                <button pButton type="button" label="Remove Term"
                                                        class="ui-button-rounded" [disabled]="enableTermButton"
                                                        (click)="removeTerm()"></button>
                                        </div>
                                </div>
                                <div>
                                        &nbsp;
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Term Name</label>

                                        </div>
                                        <div class="column">
                                                <input id="termNameinput" type="text" size="30" pInputText
                                                        [(ngModel)]="termName">
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Term Code</label>

                                        </div>
                                        <div class="column">
                                                <input id="termCodeinput" type="text" size="30" pInputText
                                                        [(ngModel)]="termCode" (ngModelChange)="termCodeChange($event)"
                                                        [disabled]="enableTermCode">
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Definition</label>

                                        </div>
                                        <div class="column">
                                                <textarea rows="5" cols="30" [(ngModel)]="definition"
                                                        pInputTextarea></textarea>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <p-checkbox [(ngModel)]="incAccuTest" binary="true"></p-checkbox>
                                        </div>
                                        <div class="column">
                                                <label>Included in Accuracy Test</label>
                                        </div>

                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Period Type</label>

                                        </div>
                                        <div class="column">

                                                <p-dropdown [options]="periodTypeList" placeholder="Period Type"
                                                        [(ngModel)]="periodType" optionLabel="name"
                                                        [style]="{'width':'200px'}" dropdownIcon="pi pi-chevron-down"
                                                        style="text-align: center" filter="true"></p-dropdown>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Type</label>

                                        </div>
                                        <div class="column">
                                                <p-dropdown [options]="typeList" placeholder="Type" [(ngModel)]="type"
                                                        optionLabel="name" [style]="{'width':'200px'}"
                                                        dropdownIcon="pi pi-chevron-down" style="text-align: center"
                                                        filter="true"></p-dropdown>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Financial Statement</label>
                                        </div>
                                        <div class="column">
                                                <p-dropdown [options]="trmRulFinStatmntList"
                                                        placeholder="Financial Statement" [(ngModel)]="finStatement"
                                                        optionLabel="financialStatement" [style]="{'width':'200px'}"
                                                        dropdownIcon="pi pi-chevron-down" style="text-align: center"
                                                        filter="true"></p-dropdown>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Priority Group</label>

                                        </div>
                                        <div class="column">
                                                <p-dropdown [options]="trmRulPriorGrpList" placeholder="Priority Group"
                                                        [(ngModel)]="priorgroup" optionLabel="name"
                                                        [style]="{'width':'200px'}" dropdownIcon="pi pi-chevron-down"
                                                        style="text-align: center" filter="true"></p-dropdown>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Processing Order </label>

                                        </div>
                                        <div class="column">
                                                <input id="processingOrder" type="text" size="6" pInputText
                                                        [(ngModel)]="processingOrder" [disabled]="true">

                                        </div>
                                </div>

                        </div>
                        <div class="exprcolumn" style="width: 50%" *ngIf="displayTerms">
                                <div>
                                        <button pButton type="button" label="Expressions"
                                                class="ui-button-rounded ui-button-success"
                                                (click)="onExpressionButtonClick('expressions')"></button>
                                        <button pButton type="button" label="Validations"
                                                class="ui-button-rounded ui-button-success"
                                                (click)="onExpressionButtonClick('validations')"></button>
                                        <button pButton type="button" label="Industry Override Expressios"
                                                class="ui-button-rounded ui-button-success"
                                                (click)="onExpressionButtonClick('industry')"
                                                icon="pi pi-check"></button>
                                        <button pButton type="button" label="Derived Zero Expressions"
                                                class="ui-button-rounded ui-button-success"
                                                (click)="onExpressionButtonClick('derived')"
                                                icon="pi pi-check"></button>
                                </div>
                                <div>
                                        &nbsp;
                                </div>
                                <div>
                                        <button pButton type="button" label="{{expLabel}}"
                                                class="ui-button-rounded ui-button-warning"
                                                (click)="expressionClick()"></button>
                                        <p-dropdown *ngIf="indOvrdExprDrop" [options]="indovrDrpList"
                                                [(ngModel)]="selIndOvrdExpr" optionLabel="name"
                                                (onChange)="industryChange()"></p-dropdown>
                                </div>
                                <div>
                                        &nbsp;
                                </div>
                                <p-table #expressionTable [columns]="expressioncols" [value]="expTableList"
                                        [paginator]="true" [rows]="10" [responsive]="true"
                                        [rowsPerPageOptions]="[10,20,30]" [resizableColumns]="true"
                                        [reorderableColumns]="true" selectionMode="single" [(selection)]="termId"
                                        dataKey="termId" p-dataTable scrollHeight="100px" [scrollable]="true"
                                        scrollHeight="300px">
                                        <ng-template pTemplate="colgroup" let-columns>
                                                <colgroup>
                                                        <col *ngFor="let col of columns">
                                                </colgroup>
                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                        <th *ngFor="let col of columns" pResizableColumn
                                                                pReorderableColumn [pSortableColumn]="col.field">
                                                                <div pTooltip="Click to sort {{col.header}}">
                                                                        {{col.header}}
                                                                        <p-sortIcon [field]="col.field"
                                                                                ariaLabel="Activate to sort"
                                                                                ariaLabelDesc="Activate to sort in descending order"
                                                                                ariaLabelAsc="Activate to sort in ascending order">
                                                                        </p-sortIcon>
                                                                </div>
                                                        </th>
                                                </tr>
                                                <tr>
                                                        <th *ngFor="let col of columns" [ngSwitch]="col.field"
                                                                pResizableColumn pReorderableColumn>
                                                                <div *ngIf="col.field !== ''">
                                                                        <input *ngSwitchCase="col.field" pInputText
                                                                                type="text" placeholder="Search"
                                                                                [value]="expressionTable.filters[col.field] ? expressionTable.filters[col.field].value : ''"
                                                                                (input)="expressionTable.filter($event.target.value, col.field, 'contains');"
                                                                                style="width: 60px">
                                                                </div>
                                                        </th>
                                                </tr>
                                        </ng-template>

                                        <ng-template pTemplate="body" let-rowData let-columns="columns"
                                                let-rowIndex="rowIndex">
                                                <tr style="height:34px">
                                                        <td *ngFor="let col of columns " class="ui-resizable-column"
                                                                style="word-wrap:break-word">
                                                                <div *ngIf="col.field === 'rank'">

                                                                        <a href="#" (click)="moveRankBy(rowIndex, -1)"
                                                                                *ngIf="rowIndex > 0"
                                                                                title="Move row up">
                                                                                <i class="fa fa-arrow-up"
                                                                                        aria-hidden="true"></i>
                                                                        </a><br>
                                                                        {{rowData[col.field]}}<br>
                                                                        <a href="#" (click)="moveRankBy(rowIndex, 1)"
                                                                                *ngIf="expTableList.length - rowIndex > 1"
                                                                                title="Move row down">
                                                                                <i class="fa fa-arrow-down"
                                                                                        aria-hidden="true"></i>
                                                                        </a>

                                                                </div>
                                                                <div
                                                                        *ngIf="col.field !== 'rank' && col.field !== 'options' && col.field !== 'expression'">
                                                                        {{rowData[col.field]}}
                                                                </div>
                                                                <div *ngIf="col.field === 'expression'">
                                                                        <div *ngIf="rowData['type'] !== 'Formula'">
                                                                                {{rowData[col.field]}}
                                                                        </div>

                                                                        <div *ngIf="rowData['type'] === 'Formula'">
                                                                                <p style="display:inline"
                                                                                        *ngFor="let formula of rowData['formulaList']">
                                                                                        <a href="#"
                                                                                                (click)="showTermResultnavigate($event,formula.termName)">{{formula.termName}}
                                                                                        </a>
                                                                                        {{getFormulaSuffix(formula)}}
                                                                                </p>
                                                                                <!-- {{rowData[col.field]}} -->
                                                                                <button type="button"
                                                                                        class="glyphicon  glyphicon-eye-open"
                                                                                        ng-click="showDerivationTree()"></button>
                                                                        </div>
                                                                </div>

                                                                <div *ngIf="col.field === 'options'">
                                                                        <button type="button" pButton
                                                                                (click)="onExpressionEdit(rowData)"
                                                                                (keydown.enter)="onExpressionEdit(rowData)"
                                                                                icon="pi pi-pencil"
                                                                                styleClass="ui-button-info"
                                                                                pTooltip="Edit Expression"></button>
                                                                        &nbsp;&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="deleteWithRank(rowIndex)"
                                                                                (keydown.enter)="deleteWithRank(rowIndex)"
                                                                                icon="pi pi-trash"
                                                                                styleClass="ui-button-info"
                                                                                pTooltip="Delete Expression"></button>
                                                                </div>
                                                        </td>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="loadingbody" let-columns="columns">
                                                <tr style="height:34px">
                                                        <td *ngFor="let col of columns"
                                                                pTooltip="{{rowData[col.field]}}">
                                                                <div class="loading-text"></div>
                                                        </td>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary">
                                                Total number of Records: {{expressionTable.totalRecords}}
                                        </ng-template>
                                </p-table>

                        </div>
                </div>
                <div class="row" *ngIf="displayTerms" style="text-align: center">
                        <label style="background-color: #E2E8EC;width: 100%"> Coverage and Term Results</label>
                </div>
                <div class="row">
                        <div class="exprcolumn" style="width: 70%; padding: 20px" *ngIf="displayTerms">

                                <div class="row">
                                        <div class="column1">
                                                <p-radioButton name="filterRadio" value="company"
                                                        [(ngModel)]="filterRadio"></p-radioButton>
                                                <label>Search by Company: </label>

                                        </div>
                                        <div class="column2">
                                                <p-autoComplete [(ngModel)]="companyName" name="companyName" [size]="50"
                                                        [suggestions]="filteredCompany"
                                                        (completeMethod)="searchCompany($event)"
                                                        placeholder="Search Company" [size]="50" [dropdown]="true">
                                                </p-autoComplete>

                                                <button pButton type="button" label="Go To Peer Goup"
                                                        class="ui-button-rounded" (click)="goToPeer($event)"></button>
                                                        <button type="button" pButton   (click)="resetCoverage()" label="Clear All"  class="ui-button-rounded"  pTooltip="Clear All"></button>
                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <p-radioButton name="filterRadio" value="group"
                                                        [(ngModel)]="filterRadio"></p-radioButton>
                                                <label>Search by Group:
                                                        Division -> Sector:</label>

                                        </div>
                                        <div class="column2">
                                                <p-dropdown [options]="filtereddivSector"
                                                        placeholder="Select Division Sector" [(ngModel)]="divSector"
                                                        [style]="{'width':'400px'}" dropdownIcon="pi pi-chevron-down"
                                                        (onChange)="divSectorChange($event)" [virtualScroll]="true"
                                                        [itemSize]="31" filter="true"></p-dropdown>
                                                &nbsp; {{divisionCount}}

                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Industry: </label>

                                        </div>
                                        <div class="column2">
                                                <p-dropdown [options]="filteredindustry" [(ngModel)]="industry"
                                                        placeholder="Select Industry" [showClear]="true"
                                                        (onChange)="processIndustryChange($event)"
                                                        [virtualScroll]="true" [itemSize]="31" filter="true"
                                                        [style]="{'width':'400px'}"></p-dropdown>
                                                &nbsp; {{industryCount}}

                                        </div>
                                </div>
                                <div class="row">
                                        <div class="column1">
                                                <label>Filer Category:</label>

                                        </div>
                                        <div class="column2">
                                                <p-dropdown [options]="filteredfilerCategory"
                                                        [(ngModel)]="filerCategory" placeholder="Select Filer Category"
                                                        [showClear]="true" (onChange)="processfilCatChange($event)"
                                                        [virtualScroll]="true" [itemSize]="31" filter="true"
                                                        [style]="{'width':'400px'}"></p-dropdown>&nbsp;
                                                {{categoryCount}}
                                        </div>
                                </div>
                                <div>
                                        <button pButton type="button" label="Show Resolved"
                                        class="ui-button-rounded"
                                                (click)="showResolved(true)"></button>
                                        <p-dropdown [options]="resolvedRanks" [(ngModel)]="selectResolvedRank"
                                                placeholder="Show Resolved By Rank" (onChange)="showResolved(true)">
                                        </p-dropdown>
                                        <button pButton type="button" label="Show Not Resolved"
                                        class="ui-button-rounded"
                                                (click)="showResolved(false)"></button>
                                </div>
                                <div class="row">
                                <div class="column1">
                                                <p-checkbox [(ngModel)]="quaterly" binary="true" label="Quarterly?">
                                                </p-checkbox>
                                </div>
                                <div class="column2" style="width:50%">
                                       <h3 style="text-align: center"> {{range[0]}} - {{range[1]}} </h3>
                                 <p-slider [(ngModel)]="range" [min]="minYear" [max]="maxYear" [step]="1" [range]="true" [style]="{'width':'50em'}" (onChange)="yearChange($event)"></p-slider>
                                 <!-- <p-slider [ext-tooltip]="range[0]" stickTo=".ui-slider-handle" tooltipPosition="top" [(ngModel)]="range" class="slider" [step]="2016" [min]="2020" [max]="range[1]" ></p-slider> -->
                                </div>
                                </div>


                        </div>
                        <div class="exprcolumn" style="width: 30%; padding: 20px">
                                <div style="float: right; padding-left: 150px" *ngIf="displayGetCoverage">
                                        <p-chart type="doughnut" [data]="chart" height="300"></p-chart>
                                        <button pButton type="button" label="Get Coverage"
                                                class="ui-button-rounded ui-button-success"
                                                (click)="showResolved(true)"></button>
                                </div>
                        </div>
                </div>


                <div class="row" *ngIf="displayTerms">
                        <div class="exprcolumn" style="width: 100%; padding: 20px">
                                <p-table #entityTable [columns]="entitycols" [value]="entityList" [paginator]="true"
                                        [rows]="10" [responsive]="true" [rowsPerPageOptions]="[10,20,30]"
                                        [resizableColumns]="true" [reorderableColumns]="true" selectionMode="single"
                                        [(selection)]="cik" dataKey="cik" (onRowSelect)="onRowClick($event)"
                                        (onRowUnselect)="onRowUnClick($event)" p-dataTable scrollHeight="100px"
                                        [scrollable]="true" scrollHeight="200px">
                                        <ng-template pTemplate="colgroup" let-columns>
                                                <colgroup>
                                                        <col *ngFor="let col of columns">
                                                </colgroup>
                                        </ng-template>
                                        <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                        <th *ngFor="let col of columns" pResizableColumn
                                                                pReorderableColumn [pSortableColumn]="col.field">
                                                                <div pTooltip="Click to sort {{col.header}}">
                                                                        {{col.header}}
                                                                        <p-sortIcon [field]="col.field"
                                                                                ariaLabel="Activate to sort"
                                                                                ariaLabelDesc="Activate to sort in descending order"
                                                                                ariaLabelAsc="Activate to sort in ascending order">
                                                                        </p-sortIcon>
                                                                </div>
                                                        </th>
                                                </tr>
                                                <tr>
                                                        <th *ngFor="let col of columns" [ngSwitch]="col.field">
                                                                <div *ngIf="col.field !== ''">
                                                                        <input *ngSwitchCase="col.field" pInputText
                                                                                type="text" placeholder="Search"
                                                                                [value]="entityTable.filters[col.field] ? entityTable.filters[col.field].value : ''"
                                                                                (input)="entityTable.filter($event.target.value, col.field, 'contains'); onRowUnClick();onFilter($event.target.value, col.field, 'contains')"
                                                                                style="width: 60px">
                                                                </div>
                                                        </th>
                                                </tr>
                                        </ng-template>

                                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                                                <tr style="height:34px">
                                                        <td *ngFor="let col of columns">
                                                                <div
                                                                        *ngIf="col.field !== 'viewResultLink' && col.field !== 'researchLink' && col.field !== 'processTermLink' && col.field !== 'fsqvLink'">
                                                                        {{rowData[col.field]}}
                                                                </div>
                                                                <div *ngIf="col.field === 'viewResultLink'">
                                                                        <a style="color:blue;"
                                                                                (click)="showTermResults(rowData)"
                                                                                href="#/termresults">View</a>
                                                                </div>
                                                                <div *ngIf="col.field === 'researchLink'">
                                                                        <a style="color:blue;" target="_blank"
                                                                                href="https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&type=&dateb=&owner=exclude&count=40&search_text=&CIK={{rowData.cik}}">Research</a>
                                                                </div>
                                                             <!--  (click)="openFSQVLink(rowData)" -->
                                                                <div *ngIf="col.field === 'fsqvLink'">
                                                                      <a style="color: blue;" target="_blank"
                                                                                href="https://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&type=&dateb=&owner=exclude&count=40&search_text=&CIK={{rowData.cik}}">FSQV</a>
                                                                </div>
                                                                <div *ngIf="col.field === 'processTermLink'">
                                                                        <a style="color:blue;"
                                                                                (click)="processTermForEntity(rowData)"
                                                                                href="#/home">Process</a>
                                                                </div>
                                                        </td>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="loadingbody" let-columns="columns">
                                                <tr style="height:34px">
                                                        <td *ngFor="let col of columns"
                                                                pTooltip="{{rowData[col.field]}}">
                                                                <div class="loading-text"></div>
                                                        </td>
                                                </tr>
                                        </ng-template>
                                        <ng-template pTemplate="summary">
                                                Total number of Records: {{entityTable.totalRecords}}
                                        </ng-template>
                                </p-table>
                        </div>

                </div>

        </div>

</div>


<p-dialog header="Term Expression Builder" [(visible)]="editExpression" [modal]="true" [style]="{width: '95vw'}"
        [baseZIndex]="10000" position="top" [contentStyle]="{'max-height':'70vh'}" [draggable]="true" [resizable]="true"
        [focusOnShow]="true" [blockScroll]="true">
        <div class="row">
                <div class="column">
                        <label>
                                Term Name:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termName" cols="30" disabled></textarea>
                        <label>
                                Definition:
                        </label>
                        <textarea pInputTextarea cols="150" [(ngModel)]="definition" disabled></textarea>

                </div>
                <div class="column">
                        <label>
                                Term Code:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termCode" cols="30" disabled></textarea>

                </div>
        </div>
        <div>
                <p-tabView [activeIndex]="index" (onChange)="onTabChange($event)">
                        <p-tabPanel header="Concept Match" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <label>
                                                Concept Name:
                                        </label>
                                        <p-autoComplete required="true" [(ngModel)]="concMatch"
                                                [suggestions]="filteredconcMat"
                                                (completeMethod)="filterConceptMatch($event)" field="id" [size]="170"
                                                placeholder="Concept Match" [minLength]="3"
                                                (ngModelChange)="getconceptNameDefinition()"></p-autoComplete>
                                        <div class="padding-5" style="background-color: #ccc; text-align: left">
                                                {{conceptNameDefinition}}
                                        </div>
                                        <div>
                                                <p-checkbox label="Use Positive Facts Only"
                                                        [(ngModel)]="usePositiveFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Use Negative Facts Only"
                                                        [(ngModel)]="useNegativeFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Reverse Negative Facts"
                                                        [(ngModel)]="revNegativeFacts" binary="true"></p-checkbox>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                Axis:
                                                        </label>
                                                </div>

                                                <div class="column">
                                                        <input type="text" size="30" pInputText [(ngModel)]="axis"
                                                                placeholder="specify axis name">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column2">
                                                        <label>
                                                                Members Exclusion (Virtual Parent):
                                                        </label>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                <textarea pInputTextarea
                                                                        [(ngModel)]="virtualFactMemberExclusions"
                                                                        cols="150"
                                                                        placeholder="Enter Exclusion Members"></textarea>
                                                        </label>

                                                </div>

                                        </div>



                                </div>

                        </p-tabPanel>
                        <p-tabPanel header="Concept Match w/ Dim" leftIcon="pi pi-user" rightIcon="pi pi-star">

                                <div style="padding-left: 20px">
                                        <label>
                                                Concept Name:
                                        </label>
                                        <p-autoComplete required="true" [(ngModel)]="concMatch"
                                                [suggestions]="filteredconcMat"
                                                (completeMethod)="filterConceptMatch($event)" field="id" [size]="170"
                                                placeholder="Concept Match" [minLength]="3"
                                                (ngModelChange)="getconceptNameDefinition()"></p-autoComplete>
                                        <div class="padding-5" style="background-color: #ccc; text-align: left">
                                                {{conceptNameDefinition}}
                                        </div>
                                        <div>
                                                <p-checkbox name="useMaxAxisCount" value="useMaxAxisCount"
                                                        label="Max # Axes/Members:" [(ngModel)]="useMaxAxisCount"
                                                        inputId="useMaxAxisCount"></p-checkbox>&nbsp;
                                                <input type="number" min="0" id="maxAxisCount" name="maxAxisCount"
                                                        [(ngModel)]="maxAxisCount">
                                        </div>
                                        <div *ngFor="let expressionSet of expressionSets; let i = index"
                                                [attr.data-index]="i">

                                                <div class="row">

                                                        <div class="conceptcolumn">
                                                                <div class="row">


                                                                        <div class="conceptcolumn1"> <label>
                                                                                        Axes:
                                                                                </label>
                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="axisOption{{i}}"
                                                                                        value="ExactMatch"
                                                                                        [(ngModel)]="expressionSet.axisType"
                                                                                        id="axisFullNameOption"
                                                                                        (onClick)="OnExpressionAxisTypeChanged(i); expressionSet.disableAxes=false;expressionSet.disableAxesInc=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <input type="text" size="30" pInputText
                                                                                        [(ngModel)]="expressionSet.axisName"
                                                                                        placeholder="specify axis name"
                                                                                        [disabled]="expressionSet.disableAxes">
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="axisOption{{i}}"
                                                                                        id="axisPartialNameOption"
                                                                                        value="InclusionExclusionList"
                                                                                        [(ngModel)]="expressionSet.axisType"
                                                                                        (onClick)="OnExpressionAxisTypeChanged(i);expressionSet.disableAxesInc=false;expressionSet.disableAxes=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Inclusions(axis name must
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        id="axisInclusionList"
                                                                                        name="axisInclusionList"
                                                                                        [disabled]="expressionSet.disableAxesInc"
                                                                                        placeholder="Enter Inclusion Axes"
                                                                                        [(ngModel)]="expressionSet.axisInclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Axes"
                                                                                        (onChange)="expressionSet.axisInclusionList = buildListFromString(expressionSet.axisInclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Exclusions (axis name must NOT
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        id="axisExclusions"
                                                                                        name="axisExclusions"
                                                                                        [disabled]="expressionSet.disableAxesInc"
                                                                                        [(ngModel)]="expressionSet.axisExclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Axes"
                                                                                        (onChange)="expressionSet.axisExclusionList = buildListFromString(expressionSet.axisExclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                        <div class="conceptcolumn">
                                                                <div class="row">


                                                                        <div class="conceptcolumn1">
                                                                                <label>
                                                                                        Members:
                                                                                </label>
                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOption{{i}}"
                                                                                        id="anyMemberOption" value="Any"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i)">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Any Members:
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOption{{i}}"
                                                                                        value="ExactMatch"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i); expressionSet.disableMember=false;expressionSet.disableMemInc=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <input type="text" size="30" pInputText
                                                                                        [(ngModel)]="expressionSet.memberName"
                                                                                        placeholder="specify member name"
                                                                                        [disabled]="expressionSet.disableMember">
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOption{{i}}"
                                                                                        value="InclusionExclusionList"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        inputId="partialMemberOption"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i);expressionSet.disableMember=true; expressionSet.disableMemInc=false">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Inclusions(member name must
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        [(ngModel)]="expressionSet.memberInclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Members"
                                                                                        [disabled]="expressionSet.disableMemInc"
                                                                                        (onChange)="expressionSet.memberInclusionList = buildListFromString(expressionSet.memberInclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Exclusions (member name must NOT
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        [(ngModel)]="expressionSet.memberExclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Members"
                                                                                        [disabled]="expressionSet.disableMemInc"
                                                                                        (onChange)="expressionSet.memberExclusionList = buildListFromString(expressionSet.memberExclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>
                                                <div style="float: center;">
                                                        <button type="button" pButton icon="pi pi-times"
                                                                (click)="removeSet(i)" label="Remove Set"
                                                                class="ui-button-rounded ui-button-success"></button>

                                                </div>

                                        </div>
                                        <div>
                                                <button type="button" pButton icon="pi pi-check"
                                                        (click)="AddExpressionSet()" label="Add New Set"
                                                        class="ui-button-rounded ui-button-success"></button>
                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Extended Check" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="padding-left: 20px">
                                        <div class="row">
                                                <div class="conceptcolumn" style="width: 30%">
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name Contains:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameContains" cols="40"
                                                                                rows="5" placeholder="Name Contains"
                                                                                (ngModelChange)="updateNameContains(nameContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name does not Contain:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameDoesNotContains"
                                                                                cols="40" rows="5"
                                                                                placeholder="Name Does Not Contain"
                                                                                (ngModelChange)="updateNameNotContains(nameDoesNotContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Balance Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="ExtendedGroup"
                                                                                value="debit" label="Debit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="ExtendedGroup"
                                                                                value="credit" label="Credit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="ExtendedGroup" value="na"
                                                                                label="NA" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="ExtendedGroup" value="none"
                                                                                label="Ignore" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Period Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="perTypeGroup"
                                                                                value="instant" label="Instant"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="perTypeGroup"
                                                                                value="duration" label="duration"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-checkbox [(ngModel)]="isShareItemType"
                                                                                binary="true" label="Share Item Type? ">
                                                                        </p-checkbox>

                                                                </div>
                                                        </div>
                                                </div>
                                                <div class="conceptcolumn"
                                                        style="background-color: #ccc; width: 65%; height: 80%;">
                                                        <div class="row" style="width: 100%">
                                                                <div class="conceptcolumn3" style="width: 100%">
                                                                        <div class="row" style="width: 100%">
                                                                                <div class="column1">

                                                                                        <label>
                                                                                                Division ->
                                                                                                Sector:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filtereddivSector"
                                                                                                placeholder="Select Division Sector"
                                                                                                [(ngModel)]="divSector"
                                                                                                [style]="{'width':'500px'}"
                                                                                                dropdownIcon="pi pi-chevron-down"
                                                                                                (onChange)="divSectorChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{divisionCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Industry: </label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredindustry"
                                                                                                [(ngModel)]="industry"
                                                                                                placeholder="Select Industry"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processIndustryChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'500px'}">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{sectorCount}}
                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Filer Category:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredfilerCategory"
                                                                                                [(ngModel)]="filerCategory"
                                                                                                placeholder="Select Filer Category"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processfilCatChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'500px'}">
                                                                                        </p-dropdown>&nbsp;
                                                                                        {{categoryCount}}
                                                                                </div>

                                                                        </div>
                                                                </div>
                                                                <div>
                                                                        <p-table #expressionTable
                                                                                [columns]="expressioncols"
                                                                                [value]="expTableList"
                                                                                [paginator]="true" [rows]="10"
                                                                                [responsive]="true"
                                                                                [rowsPerPageOptions]="[10,20,30]"
                                                                                [resizableColumns]="true"
                                                                                [reorderableColumns]="true"
                                                                                selectionMode="single"
                                                                                [(selection)]="termId" dataKey="termId"
                                                                                (onRowSelect)="onRowClick($event)"
                                                                                (onRowUnselect)="onRowUnClick($event)"
                                                                                p-dataTable scrollHeight="100px"
                                                                                [scrollable]="true"
                                                                                scrollHeight="200px">

                                                                        </p-table>
                                                                </div>
                                                                <div style="float: left; padding: 10px;">
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Resolve"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Include"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Exclude"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Extended Check w/ Dim" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="padding-left: 20px">
                                        <div class="row">
                                                <div class="conceptcolumn" style="width: 30%">
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name Contains:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameContains" cols="40"
                                                                                rows="5" placeholder="Name Contains"
                                                                                (ngModelChange)="updateNameContains(nameContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name does not Contain:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameDoesNotContains"
                                                                                cols="40" rows="5"
                                                                                placeholder="Name Does Not Contain"
                                                                                (ngModelChange)="updateNameNotContains(nameDoesNotContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Balance Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="balType"
                                                                                value="debit" label="Debit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="balType" value="credit"
                                                                                label="Credit" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="balType" value="na"
                                                                                label="NA" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="balType" value="none"
                                                                                label="Ignore" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Period Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="radioGroup1"
                                                                                value="instant" label="Instant"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="radioGroup1"
                                                                                value="duration" label="duration"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-checkbox [(ngModel)]="isShareItemType"
                                                                                binary="true" label="Share Item Type? ">
                                                                        </p-checkbox>

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Axes:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea [(ngModel)]="axes"
                                                                                cols="40" rows="5"
                                                                                placeholder="Enter Axes"
                                                                                (onChange)="updateAxes(axes)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Members:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="axesMembers" cols="40"
                                                                                rows="5" placeholder="Enter Members"
                                                                                (onChange)="updateAxesMembers(axesMembers)"></textarea>
                                                                </div>
                                                        </div>
                                                </div>
                                                <div class="conceptcolumn"
                                                        style="background-color: #ccc; width: 65%; height: 80%;">
                                                        <div class="row" style="width: 100%">
                                                                <div class="conceptcolumn3" style="width: 100%">
                                                                        <div class="row" style="width: 100%">
                                                                                <div class="column1">

                                                                                        <label>
                                                                                                Division ->
                                                                                                Sector:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filtereddivSector"
                                                                                                placeholder="Select Division Sector"
                                                                                                [(ngModel)]="divSector"
                                                                                                [style]="{'width':'800px'}"
                                                                                                dropdownIcon="pi pi-chevron-down"
                                                                                                (onChange)="divSectorChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{divisionCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Industry: </label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredindustry"
                                                                                                [(ngModel)]="industry"
                                                                                                placeholder="Select Industry"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processIndustryChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{sectorCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Filer Category:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredfilerCategory"
                                                                                                [(ngModel)]="filerCategory"
                                                                                                placeholder="Select Filer Category"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processfilCatChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>&nbsp;
                                                                                        {{categoryCount}}
                                                                                </div>

                                                                        </div>
                                                                </div>
                                                                <div>
                                                                        <p-table #expressionTable
                                                                                [columns]="expressioncols"
                                                                                [value]="expTableList"
                                                                                [paginator]="true" [rows]="10"
                                                                                [responsive]="true"
                                                                                [rowsPerPageOptions]="[10,20,30]"
                                                                                [resizableColumns]="true"
                                                                                [reorderableColumns]="true"
                                                                                selectionMode="single"
                                                                                [(selection)]="termId" dataKey="termId"
                                                                                (onRowSelect)="onRowClick($event)"
                                                                                (onRowUnselect)="onRowUnClick($event)"
                                                                                p-dataTable scrollHeight="100px"
                                                                                [scrollable]="true"
                                                                                scrollHeight="200px">

                                                                        </p-table>
                                                                </div>
                                                                <div style="float: left; padding: 10px;">
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Resolve"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Include"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Exclude"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Formula" leftIcon="pi pi-user" rightIcon="pi pi-star"
                                [style]="{height: '500px'}">
                                <div style="padding-left: 20px">
                                        <div *ngFor="let formulaSet of formulaSets; let i = index"
                                                [attr.data-index]="i">

                                                <div class="row" style="width: 100%">

                                                        <div class="conceptcolumn" style="width: 100%">
                                                                <div class="row" style="width: 100%">


                                                                        <div class="conceptcolumn1" style="width: 100%">
                                                                                <label>
                                                                                        Term Name:
                                                                                </label>
                                                                                <p-autoComplete
                                                                                        [(ngModel)]="formulaSet.termName"
                                                                                        name="formulaTermName"
                                                                                        [size]="50"
                                                                                        [suggestions]="formulaFilteredTerms"
                                                                                        (completeMethod)="searchTermNames($event)"
                                                                                        placeholder="Search Term Name"
                                                                                        [dropdown]="true">
                                                                                </p-autoComplete>&nbsp;
                                                                                <p-checkbox
                                                                                        [(ngModel)]="formulaSet.nullable"
                                                                                        binary="true"></p-checkbox>
                                                                                &nbsp;
                                                                                <label>
                                                                                        Allow Null? Operators:
                                                                                </label>
                                                                                <p-dropdown
                                                                                        [options]="formulaOperatorsList"
                                                                                        [(ngModel)]="formulaSet.operation"
                                                                                        optionLabel="name"
                                                                                        [showClear]="true"></p-dropdown>
                                                                                &nbsp;
                                                                                <button type="button" pButton
                                                                                        (click)="deleteFormula(i)"
                                                                                        (keydown.enter)="deleteFormula(i)"
                                                                                        icon="pi pi-trash"
                                                                                        styleClass="ui-button-info"
                                                                                        pTooltip="Delete Term Name"></button>

                                                                        </div>
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <button type="button" pButton icon="pi pi-check"
                                                                (click)="addAnotherFormula()"
                                                                label="Add + Another Term to Formula"
                                                                class="ui-button-rounded ui-button-success"></button>
                                                </div>
                                        </div>
                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Concept Match Multiple" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <div *ngFor="let conceptSet of conceptMatchMultipleList; let i = index"
                                                [attr.data-index]="i">
                                                <div class="row">
                                                        <div class="column">
                                                                <label>
                                                                        Concept Name:
                                                                </label>
                                                        </div>
                                                        <div class="column">
                                                                <p-autoComplete [(ngModel)]="conceptMatchMultiple[i]"
                                                                        [suggestions]="filteredconcMat"
                                                                        (completeMethod)="filterConceptMatch($event)"
                                                                        [size]="80" field="id"
                                                                        placeholder="Enter Concept Name"
                                                                        [minLength]="3"></p-autoComplete>
                                                                <button type="button" pButton
                                                                        (click)="deleteConceptMatchMultipleItem(i)"
                                                                        (keydown.enter)="deleteConceptMatchMultipleItem(i)"
                                                                        icon="pi pi-trash" styleClass="ui-button-info"
                                                                        pTooltip="Delete Concept"></button>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <button type="button" pButton (click)="addAnotherConcept()"
                                                        label="Add + Another Concept"
                                                        class="ui-button-rounded ui-button-success"></button>
                                        </div>
                                        <div class="row">
                                                <p-checkbox label="Use Positive Facts Only"
                                                        [(ngModel)]="usePositiveFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Use Negative Facts Only"
                                                        [(ngModel)]="useNegativeFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Reverse Negative Facts"
                                                        [(ngModel)]="revNegativeFacts" binary="true"></p-checkbox>

                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                Axis:
                                                        </label>
                                                </div>

                                                <div class="column">
                                                        <input type="text" size="30" pInputText [(ngModel)]="axis"
                                                                placeholder="specify axis name">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column2">
                                                        <label>
                                                                Members Exclusion (Virtual Parent):
                                                        </label>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                <textarea pInputTextarea
                                                                        [(ngModel)]="virtualFactMemberExclusions"
                                                                        cols="150"
                                                                        placeholder="Enter Exclusion Members"></textarea>
                                                        </label>

                                                </div>

                                        </div>



                                </div>
                        </p-tabPanel>
                </p-tabView>
        </div>
        <p-footer>
                <button type="button" pButton icon="pi pi-check" (click)="editExpression=false; saveExpression()"
                        label="Save Expression"></button>
                <button type="button" pButton icon="pi pi-times" (click)="editExpression=false" label="Cancel"
                        class="ui-button-secondary"></button>
        </p-footer>
</p-dialog>
<p-dialog header="Term Validation Builder" [(visible)]="addEditValidation" [modal]="true" [style]="{width: '95vw'}"
        [baseZIndex]="10000" position="top" [contentStyle]="{'max-height':'70vh'}" [draggable]="true" [resizable]="true"
        [focusOnShow]="true" [blockScroll]="true">
        <div style="padding-left: 20px">
                <div class="row">
                        <div class="column">
                                <label>
                                        Term Name:
                                </label>
                                <textarea pInputTextarea [(ngModel)]="termName" cols="30" disabled></textarea>
                                <label>
                                        Definition:
                                </label>
                                <textarea pInputTextarea cols="150" [(ngModel)]="definition" disabled></textarea>

                        </div>
                        <div class="column">
                                <label>
                                        Term Code:
                                </label>
                                <textarea pInputTextarea [(ngModel)]="termCode" cols="30" disabled></textarea>

                        </div>
                </div>
                <div *ngFor="let formulaSet of formulaSets; let i = index" [attr.data-index]="i">

                        <div class="row" style="width: 100%">

                                <div class="conceptcolumn" style="width: 100%">
                                        <div class="row" style="width: 100%">


                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <label>
                                                                Term Name:
                                                        </label>
                                                        <p-autoComplete [(ngModel)]="formulaSet.termName"
                                                                name="formulaTermName" [size]="100"
                                                                [suggestions]="formulaFilteredTerms"
                                                                (completeMethod)="searchTermNames($event)"
                                                                placeholder="Search Term Name" [dropdown]="true">
                                                        </p-autoComplete>&nbsp;
                                                        <p-checkbox [(ngModel)]="formulaSet.nullable" binary="true">
                                                        </p-checkbox>&nbsp;
                                                        <label>
                                                                Allow Null? Operators:
                                                        </label>
                                                        <p-dropdown [options]="formulaOperatorsList"
                                                                [(ngModel)]="formulaSet.operation" optionLabel="name"
                                                                [showClear]="true"></p-dropdown>&nbsp;
                                                        <button type="button" pButton (click)="deleteFormula(i)"
                                                                (keydown.enter)="deleteFormula(i)" icon="pi pi-trash"
                                                                styleClass="ui-button-info"
                                                                pTooltip="Delete Term Name"></button>

                                                </div>
                                        </div>

                                </div>
                        </div>

                </div>
                <div class="row" style="width: 100%">
                        <div class="conceptcolumn1" style="width: 100%">
                                <button type="button" pButton icon="pi pi-check" (click)="addAnotherFormula()"
                                        label="Add + Another Term to Formula"
                                        class="ui-button-rounded ui-button-success"></button>
                        </div>
                </div>
                <div class="row" style="width: 100%">
                        <p-checkbox [(ngModel)]="showExpression" binary="true"
                                (ngModelChange)="getValidationExpression()"></p-checkbox>&nbsp;
                        <label>
                                Show Expression ?
                        </label>
                </div>
                <div class="row" style="width: 100%" *ngIf="showExpression">
                        <label> Rank : {{validationRank}}
                        </label>
                </div>
                <div class="row" style="width: 100%" *ngIf="showExpression">
                        <label> Expression : {{validationExpression}}
                        </label>
                </div>
        </div>

        <p-footer>
                <button type="button" pButton icon="pi pi-check"
                        (click)="addEditValidation=false; saveRuleWithValidation()" label="Save Validation"></button>
                <button type="button" pButton icon="pi pi-times" (click)="addEditValidation=false" label="Cancel"
                        class="ui-button-secondary"></button>
        </p-footer>
</p-dialog>

<p-dialog header="Term Override Expression Builder" [(visible)]="addEditIndustry" [modal]="true"
        [style]="{width: '95vw'}" [baseZIndex]="10000" position="top" [contentStyle]="{'max-height':'70vh'}"
        [draggable]="true" [resizable]="true" [focusOnShow]="true" [blockScroll]="true">
        <div class="row">
                <div class="column">
                        <label>
                                Term Name:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termName" cols="30" disabled></textarea>
                        <label>
                                Definition:
                        </label>
                        <textarea pInputTextarea cols="150" [(ngModel)]="definition" disabled></textarea>

                </div>
                <div class="column">
                        <label>
                                Term Code:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termCode" cols="30" disabled></textarea>

                </div>
        </div>
        <div class="row">
                <div class="column">
                        <label>
                                Companies/Industries to override:
                        </label>
                </div>

        </div>
        <div class="row">
                <div class="column">
                        <label>
                                Override Name:
                        </label>
                </div>
                <div class="column2">
                        <!-- <p-dropdown [options]="indovrDrpList" [(ngModel)]="overrideName" placeholder="Enter Override Name" optionLabel="name"  [style]="{'width':'400px'}" [showClear]="true"></p-dropdown> -->
                        <p-autoComplete [(ngModel)]="overrideName" [suggestions]="companyovrRideList"
                                (completeMethod)="getOverRides($event)" (onSelect)="getCurrentOverrideDetails()"
                                field="name"></p-autoComplete>
                        <!-- <input id="typeahead-http" type="text" class="form-control mx-sm-3"  [selectItem]="getCurrentOverrideDetails()"
                        [class.is-invalid]="searchFailed" [(ngModel)]="overrideName" [ngbTypeahead]="termRule.overrides" placeholder="Enter Override Name" /> -->
                </div>
                <div class="column">
                        <p-checkbox [(ngModel)]="mergeBaseExpressions" binary="true" label=" Merge Base Expressions?">
                        </p-checkbox>


                </div>

        </div>
        <!-- <div class="row" *ngIf="searchFailed">Sorry, suggestions could not be loaded.</div> -->
        <div class="row" style="height: 5px;"></div>
        <div *ngFor="let overrides of entityOverrides; let i = index" [attr.data-index]="i">
                <div class="row">
                        <div class="column">
                                <label>
                                        Company:
                                </label>
                        </div>
                        <div class="column">
                                <p-autoComplete [(ngModel)]="overrides.entityname" name="overridecompanyName"
                                        [size]="50" [suggestions]="filteredCompany"
                                        (completeMethod)="searchCompany($event)" placeholder="Search Company"
                                        [dropdown]="true">
                                </p-autoComplete>
                        </div>

                </div>
                <div class="row" style="height: 5px;"></div>
                <div class="row" style="width: 100%">
                        <div class="column">

                                <label>
                                        Division -> Sector:</label>

                        </div>
                        <div class="column">
                                <p-autoComplete [(ngModel)]="overrides.divisionSector" name="overrideDivSec" [size]="50"
                                        [suggestions]="filtereddivSector"
                                        (completeMethod)="searchDivisionSector($event)"
                                        placeholder="Search Division Sector" [dropdown]="true">
                                </p-autoComplete> &nbsp;&nbsp;
                                <button type="button" pButton (click)="removeOverride(i)"
                                        (keydown.enter)="removeOverride(i)" icon="pi pi-trash"
                                        styleClass="ui-button-info" pTooltip="Delete Override"></button>
                        </div>
                </div>
                <div class="row" style="height: 5px;"></div>
        </div>
        <div class="row" style="width: 100%">
                <div class="conceptcolumn1" style="width: 100%">
                        <button type="button" pButton icon="pi pi-check" (click)="addAnotherIndustryOverride()"
                                label="Add + Another Company/Industry"
                                class="ui-button-rounded ui-button-success"></button>
                </div>
        </div>
        <div>
                <p-tabView [activeIndex]="index" (onChange)="onTabChange($event)">
                        <p-tabPanel header="Concept Match" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <label>
                                                Concept Name:
                                        </label>
                                        <p-autoComplete required="true" [(ngModel)]="concMatch"
                                                [suggestions]="filteredconcMat"
                                                (completeMethod)="filterConceptMatch($event)" field="id" [size]="170"
                                                placeholder="Concept Match" [minLength]="3"
                                                (ngModelChange)="getconceptNameDefinition()"></p-autoComplete>
                                        <div class="padding-5" style="background-color: #ccc; text-align: left">
                                                {{conceptNameDefinition}}
                                        </div>
                                        <div>
                                                <p-checkbox label="Use Positive Facts Only"
                                                        [(ngModel)]="usePositiveFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Use Negative Facts Only"
                                                        [(ngModel)]="useNegativeFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Reverse Negative Facts"
                                                        [(ngModel)]="revNegativeFacts" binary="true"></p-checkbox>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                Axis:
                                                        </label>
                                                </div>

                                                <div class="column">
                                                        <input type="text" size="30" pInputText [(ngModel)]="axis"
                                                                placeholder="specify axis name">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column2">
                                                        <label>
                                                                Members Exclusion (Virtual Parent):
                                                        </label>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                <textarea pInputTextarea
                                                                        [(ngModel)]="virtualFactMemberExclusions"
                                                                        cols="150"
                                                                        placeholder="Enter Exclusion Members"></textarea>
                                                        </label>

                                                </div>

                                        </div>



                                </div>

                        </p-tabPanel>
                        <p-tabPanel header="Concept Match w/ Dim" leftIcon="pi pi-user" rightIcon="pi pi-star">

                                <div style="padding-left: 20px">
                                        <label>
                                                Concept Name:
                                        </label>
                                        <p-autoComplete required="true" [(ngModel)]="concMatch"
                                                [suggestions]="filteredconcMat"
                                                (completeMethod)="filterConceptMatch($event)" field="id" [size]="170"
                                                placeholder="Concept Match" [minLength]="3"
                                                (ngModelChange)="getconceptNameDefinition()"></p-autoComplete>
                                        <div class="padding-5" style="background-color: #ccc; text-align: left">
                                                {{conceptNameDefinition}}
                                        </div>
                                        <div>
                                                <p-checkbox name="useMaxAxisCount" value="useMaxAxisCount"
                                                        label="Max # Axes/Members:" [(ngModel)]="useMaxAxisCount"
                                                        inputId="useMaxAxisCount"></p-checkbox>&nbsp;
                                                <input type="number" min="0" id="maxAxisCount" name="maxAxisCount"
                                                        [(ngModel)]="maxAxisCount">
                                        </div>
                                        <div *ngFor="let expressionSet of expressionSets; let i = index"
                                                [attr.data-index]="i">

                                                <div class="row">

                                                        <div class="conceptcolumn">
                                                                <div class="row">


                                                                        <div class="conceptcolumn1"> <label>
                                                                                        Axes:
                                                                                </label>
                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="axisOptions{{i}}"
                                                                                        value="ExactMatch"
                                                                                        [(ngModel)]="expressionSet.axisType"
                                                                                        id="axsFullNameOption"
                                                                                        (onClick)="OnExpressionAxisTypeChanged(i); expressionSet.disableAxes=false;expressionSet.disableAxesInc=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <input type="text" size="30" pInputText
                                                                                        [(ngModel)]="expressionSet.axisName"
                                                                                        placeholder="specify axis name"
                                                                                        [disabled]="expressionSet.disableAxes">
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="axisOptions{{i}}"
                                                                                        id="axisPartialNameOption"
                                                                                        value="InclusionExclusionList"
                                                                                        [(ngModel)]="expressionSet.axisType"
                                                                                        (onClick)="OnExpressionAxisTypeChanged(i);expressionSet.disableAxesInc=false;expressionSet.disableAxes=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Inclusions(axis name must
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        id="axisInclusionList"
                                                                                        name="axisInclusionList"
                                                                                        [disabled]="expressionSet.disableAxesInc"
                                                                                        placeholder="Enter Inclusion Axes"
                                                                                        [(ngModel)]="expressionSet.axisInclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Axes"
                                                                                        (onChange)="expressionSet.axisInclusionList = buildListFromString(expressionSet.axisInclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Exclusions (axis name must NOT
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        id="axisExclusions"
                                                                                        name="axisExclusions"
                                                                                        [disabled]="expressionSet.disableAxesInc"
                                                                                        [(ngModel)]="expressionSet.axisExclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Axes"
                                                                                        (onChange)="expressionSet.axisExclusionList = buildListFromString(expressionSet.axisExclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                        <div class="conceptcolumn">
                                                                <div class="row">


                                                                        <div class="conceptcolumn1">
                                                                                <label>
                                                                                        Members:
                                                                                </label>
                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOptions{{i}}"
                                                                                        id="anyMemberOption" value="Any"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i)">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Any Members:
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOptions{{i}}"
                                                                                        value="ExactMatch"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i); expressionSet.disableMember=false;expressionSet.disableMemInc=true">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <input type="text" size="30" pInputText
                                                                                        [(ngModel)]="expressionSet.memberName"
                                                                                        placeholder="specify member name"
                                                                                        [disabled]="expressionSet.disableMember">
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                                <p-radioButton name="memberOptions{{i}}"
                                                                                        value="InclusionExclusionList"
                                                                                        [(ngModel)]="expressionSet.memberType"
                                                                                        inputId="partialMemberOption"
                                                                                        (onClick)="OnExpressionMemberTypeChanged(i);expressionSet.disableMember=true; expressionSet.disableMemInc=false">
                                                                                </p-radioButton>
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Inclusions(member name must
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        [(ngModel)]="expressionSet.memberInclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Members"
                                                                                        [disabled]="expressionSet.disableMemInc"
                                                                                        (onChange)="expressionSet.memberInclusionList = buildListFromString(expressionSet.memberInclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <label>
                                                                                        Exclusions (member name must NOT
                                                                                        contain the list of words):
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="conceptcolumn1">

                                                                        </div>
                                                                        <div class="conceptcolumn2">
                                                                        </div>
                                                                        <div class="conceptcolumn3">
                                                                                <textarea pInputTextarea
                                                                                        [(ngModel)]="expressionSet.memberExclusionListAsString"
                                                                                        cols="50"
                                                                                        placeholder="Enter Exclusion Members"
                                                                                        [disabled]="expressionSet.disableMemInc"
                                                                                        (onChange)="expressionSet.memberExclusionList = buildListFromString(expressionSet.memberExclusionListAsString)"></textarea>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>
                                                <div style="float: center;">
                                                        <button type="button" pButton icon="pi pi-times"
                                                                (click)="removeSet(i)" label="Remove Set"
                                                                class="ui-button-rounded ui-button-success"></button>

                                                </div>

                                        </div>
                                        <div>
                                                <button type="button" pButton icon="pi pi-check"
                                                        (click)="AddExpressionSet()" label="Add New Set"
                                                        class="ui-button-rounded ui-button-success"></button>
                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Extended Check" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="padding-left: 20px">
                                        <div class="row">
                                                <div class="conceptcolumn" style="width: 30%">
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name Contains:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameContains" cols="40"
                                                                                rows="5" placeholder="Name Contains"
                                                                                (ngModelChange)="updateNameContains(nameContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name does not Contain:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameDoesNotContains"
                                                                                cols="40" rows="5"
                                                                                placeholder="Name Does Not Contain"
                                                                                (ngModelChange)="updateNameNotContains(nameDoesNotContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Balance Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="ExtendedGroup1"
                                                                                value="debit" label="Debit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="ExtendedGroup1"
                                                                                value="credit" label="Credit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="ExtendedGroup1" value="na"
                                                                                label="NA" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="ExtendedGroup1"
                                                                                value="none" label="Ignore"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Period Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="perTypeGroup1"
                                                                                value="instant" label="Instant"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="perTypeGroup1"
                                                                                value="duration" label="duration"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-checkbox [(ngModel)]="isShareItemType"
                                                                                binary="true" label="Share Item Type? ">
                                                                        </p-checkbox>

                                                                </div>
                                                        </div>
                                                </div>
                                                <div class="conceptcolumn"
                                                        style="background-color: #ccc; width: 65%; height: 80%;">
                                                        <div class="row" style="width: 100%">
                                                                <div class="conceptcolumn3" style="width: 100%">
                                                                        <div class="row" style="width: 100%">
                                                                                <div class="column1">

                                                                                        <label>
                                                                                                Division ->
                                                                                                Sector:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filtereddivSector"
                                                                                                placeholder="Select Division Sector"
                                                                                                [(ngModel)]="divSector"
                                                                                                [style]="{'width':'800px'}"
                                                                                                dropdownIcon="pi pi-chevron-down"
                                                                                                (onChange)="divSectorChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{divisionCount}}
                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Industry: </label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredindustry"
                                                                                                [(ngModel)]="industry"
                                                                                                placeholder="Select Industry"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processIndustryChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{sectorCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Filer Category:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredfilerCategory"
                                                                                                [(ngModel)]="filerCategory"
                                                                                                placeholder="Select Filer Category"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processfilCatChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>&nbsp;
                                                                                        {{categoryCount}}
                                                                                </div>

                                                                        </div>
                                                                </div>
                                                                <div>
                                                                        <p-table #expressionTable
                                                                                [columns]="expressioncols"
                                                                                [value]="expTableList"
                                                                                [paginator]="true" [rows]="10"
                                                                                [responsive]="true"
                                                                                [rowsPerPageOptions]="[10,20,30]"
                                                                                [resizableColumns]="true"
                                                                                [reorderableColumns]="true"
                                                                                selectionMode="single"
                                                                                [(selection)]="termId" dataKey="termId"
                                                                                (onRowSelect)="onRowClick($event)"
                                                                                (onRowUnselect)="onRowUnClick($event)"
                                                                                p-dataTable scrollHeight="100px"
                                                                                [scrollable]="true"
                                                                                scrollHeight="200px">

                                                                        </p-table>
                                                                </div>
                                                                <div style="float: left; padding: 10px;">
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Resolve"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Include"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Exclude"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Extended Check w/ Dim" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="padding-left: 20px">
                                        <div class="row">
                                                <div class="conceptcolumn" style="width: 30%">
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name Contains:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameContains" cols="40"
                                                                                rows="5" placeholder="Name Contains"
                                                                                (ngModelChange)="updateNameContains(nameContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Element Name does not Contain:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="nameDoesNotContains"
                                                                                cols="40" rows="5"
                                                                                placeholder="Name Does Not Contain"
                                                                                (ngModelChange)="updateNameNotContains(nameDoesNotContains)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Balance Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="balType1"
                                                                                value="debit" label="Debit"
                                                                                [(ngModel)]="balType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="balType1" value="credit"
                                                                                label="Credit" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="balType1" value="na"
                                                                                label="NA" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                        <p-radioButton name="balType1" value="none"
                                                                                label="Ignore" [(ngModel)]="balType">
                                                                        </p-radioButton> &nbsp;
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Period Type:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-radioButton name="radioGroup2"
                                                                                value="instant" label="Instant"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;
                                                                        <p-radioButton name="radioGroup2"
                                                                                value="duration" label="duration"
                                                                                [(ngModel)]="perType"></p-radioButton>
                                                                        &nbsp;

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        &nbsp; <p-checkbox [(ngModel)]="isShareItemType"
                                                                                binary="true" label="Share Item Type? ">
                                                                        </p-checkbox>

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Axes:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea [(ngModel)]="axes"
                                                                                cols="40" rows="5"
                                                                                placeholder="Enter Axes"
                                                                                (onChange)="updateAxes(axes)"></textarea>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <label>
                                                                                Members:
                                                                        </label>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="conceptcolumn3">
                                                                        <textarea pInputTextarea
                                                                                [(ngModel)]="axesMembers" cols="40"
                                                                                rows="5" placeholder="Enter Members"
                                                                                (onChange)="updateAxesMembers(axesMembers)"></textarea>
                                                                </div>
                                                        </div>
                                                </div>
                                                <div class="conceptcolumn"
                                                        style="background-color: #ccc; width: 65%; height: 80%;">
                                                        <div class="row" style="width: 100%">
                                                                <div class="conceptcolumn3" style="width: 100%">
                                                                        <div class="row" style="width: 100%">
                                                                                <div class="column1">

                                                                                        <label>
                                                                                                Division ->
                                                                                                Sector:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filtereddivSector"
                                                                                                placeholder="Select Division Sector"
                                                                                                [(ngModel)]="divSector"
                                                                                                [style]="{'width':'800px'}"
                                                                                                dropdownIcon="pi pi-chevron-down"
                                                                                                (onChange)="divSectorChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{divisionCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Industry: </label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredindustry"
                                                                                                [(ngModel)]="industry"
                                                                                                placeholder="Select Industry"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processIndustryChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>
                                                                                        &nbsp; {{sectorCount}}

                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="column1">
                                                                                        <label>Filer Category:</label>

                                                                                </div>
                                                                                <div class="column2">
                                                                                        <p-dropdown
                                                                                                [options]="filteredfilerCategory"
                                                                                                [(ngModel)]="filerCategory"
                                                                                                placeholder="Select Filer Category"
                                                                                                [showClear]="true"
                                                                                                (onChange)="processfilCatChange($event)"
                                                                                                [virtualScroll]="true"
                                                                                                [itemSize]="31"
                                                                                                filter="true"
                                                                                                [style]="{'width':'800px'}">
                                                                                        </p-dropdown>&nbsp;
                                                                                        {{categoryCount}}
                                                                                </div>

                                                                        </div>
                                                                </div>
                                                                <div>
                                                                        <p-table #expressionTable
                                                                                [columns]="expressioncols"
                                                                                [value]="expTableList"
                                                                                [paginator]="true" [rows]="10"
                                                                                [responsive]="true"
                                                                                [rowsPerPageOptions]="[10,20,30]"
                                                                                [resizableColumns]="true"
                                                                                [reorderableColumns]="true"
                                                                                selectionMode="single"
                                                                                [(selection)]="termId" dataKey="termId"
                                                                                (onRowSelect)="onRowClick($event)"
                                                                                (onRowUnselect)="onRowUnClick($event)"
                                                                                p-dataTable scrollHeight="100px"
                                                                                [scrollable]="true"
                                                                                scrollHeight="200px">

                                                                        </p-table>
                                                                </div>
                                                                <div style="float: left; padding: 10px;">
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Resolve"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Include"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                        <button type="button" pButton
                                                                                (click)="editExpression=false"
                                                                                label="Exclude"
                                                                                class="ui-button-rounded ui-button-info"></button>&nbsp;
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Formula" leftIcon="pi pi-user" rightIcon="pi pi-star"
                                [style]="{height: '500px'}">
                                <div style="padding-left: 20px">
                                        <div *ngFor="let formulaSet of formulaSets; let i = index"
                                                [attr.data-index]="i">

                                                <div class="row" style="width: 100%">

                                                        <div class="conceptcolumn" style="width: 100%">
                                                                <div class="row" style="width: 100%">


                                                                        <div class="conceptcolumn1" style="width: 100%">
                                                                                <label>
                                                                                        Term Name:
                                                                                </label>
                                                                                <p-autoComplete
                                                                                        [(ngModel)]="formulaSet.termName"
                                                                                        name="formulaTermName"
                                                                                        [size]="50"
                                                                                        [suggestions]="formulaFilteredTerms"
                                                                                        (completeMethod)="searchTermNames($event)"
                                                                                        placeholder="Search Term Name"
                                                                                        [dropdown]="true">
                                                                                </p-autoComplete>&nbsp;
                                                                                <p-checkbox
                                                                                        [(ngModel)]="formulaSet.nullable"
                                                                                        binary="true"></p-checkbox>
                                                                                &nbsp;
                                                                                <label>
                                                                                        Allow Null? Operators:
                                                                                </label>
                                                                                <p-dropdown
                                                                                        [options]="formulaOperatorsList"
                                                                                        [(ngModel)]="formulaSet.operation"
                                                                                        optionLabel="name"
                                                                                        [showClear]="true"></p-dropdown>
                                                                                &nbsp;
                                                                                <button type="button" pButton
                                                                                        (click)="deleteFormula(i)"
                                                                                        (keydown.enter)="deleteFormula(i)"
                                                                                        icon="pi pi-trash"
                                                                                        styleClass="ui-button-info"
                                                                                        pTooltip="Delete Term Name"></button>

                                                                        </div>
                                                                </div>

                                                        </div>
                                                </div>

                                        </div>
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <button type="button" pButton icon="pi pi-check"
                                                                (click)="addAnotherFormula()"
                                                                label="Add + Another Term to Formula"
                                                                class="ui-button-rounded ui-button-success"></button>
                                                </div>
                                        </div>
                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Concept Match Multiple" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <div *ngFor="let conceptSet of conceptMatchMultipleList; let i = index"
                                                [attr.data-index]="i">
                                                <div class="row">
                                                        <div class="column">
                                                                <label>
                                                                        Concept Name:
                                                                </label>
                                                        </div>
                                                        <div class="column">
                                                                <p-autoComplete [(ngModel)]="conceptMatchMultiple[i]"
                                                                        [suggestions]="filteredconcMat"
                                                                        (completeMethod)="filterConceptMatch($event)"
                                                                        [size]="80" field="id"
                                                                        placeholder="Enter Concept Name"
                                                                        [minLength]="3"></p-autoComplete>
                                                                <button type="button" pButton
                                                                        (click)="deleteConceptMatchMultipleItem(i)"
                                                                        (keydown.enter)="deleteConceptMatchMultipleItem(i)"
                                                                        icon="pi pi-trash" styleClass="ui-button-info"
                                                                        pTooltip="Delete Concept"></button>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <button type="button" pButton (click)="addAnotherConcept()"
                                                        label="Add + Another Concept"
                                                        class="ui-button-rounded ui-button-success"></button>
                                        </div>
                                        <div class="row">
                                                <p-checkbox label="Use Positive Facts Only"
                                                        [(ngModel)]="usePositiveFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Use Negative Facts Only"
                                                        [(ngModel)]="useNegativeFacts" binary="true"></p-checkbox>
                                                &nbsp;&nbsp;
                                                <p-checkbox label="Reverse Negative Facts"
                                                        [(ngModel)]="revNegativeFacts" binary="true"></p-checkbox>

                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                Axis:
                                                        </label>
                                                </div>

                                                <div class="column">
                                                        <input type="text" size="30" pInputText [(ngModel)]="axis"
                                                                placeholder="specify axis name">
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column2">
                                                        <label>
                                                                Members Exclusion (Virtual Parent):
                                                        </label>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="column">
                                                        <label>
                                                                <textarea pInputTextarea
                                                                        [(ngModel)]="virtualFactMemberExclusions"
                                                                        cols="150"
                                                                        placeholder="Enter Exclusion Members"></textarea>
                                                        </label>

                                                </div>

                                        </div>



                                </div>
                        </p-tabPanel>
                </p-tabView>
        </div>
        <p-footer>
                <button type="button" pButton icon="pi pi-check"
                        (click)="addEditIndustry=false; editExpression=false; saveExpression()"
                        label="Save Expression"></button>
                <button type="button" pButton icon="pi pi-times" (click)="addEditIndustry=false; editExpression=false;"
                        label="Cancel" class="ui-button-secondary"></button>
        </p-footer>
</p-dialog>

<p-dialog header="Term Derived Zero Expression Builder" [(visible)]="addEditDerived" [modal]="true"
        [style]="{width: '95vw'}" [baseZIndex]="10000" position="top" [contentStyle]="{'max-height':'70vh'}"
        [draggable]="true" [resizable]="true" [focusOnShow]="true" [blockScroll]="true">
        <div class="row">
                <div class="column">
                        <label>
                                Term Name:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termName" cols="30" disabled></textarea>
                        <label>
                                Definition:
                        </label>
                        <textarea pInputTextarea cols="150" [(ngModel)]="definition" disabled></textarea>

                </div>
                <div class="column">
                        <label>
                                Term Code:
                        </label>
                        <textarea pInputTextarea [(ngModel)]="termCode" cols="30" disabled></textarea>

                </div>
        </div>
        <div class="row" style="height: 5px;"></div>

        <div>
                <p-tabView [activeIndex]="activeExpressionTabIndex" (onChange)="onDerivedTabChange($event)">
                        <p-tabPanel header="Text Block Check" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <div *ngFor="let item of derivedZeroExpressionForEdit.textBlockList; let i = index"
                                                [attr.data-index]="i">
                                                <div class="row" style="width: 100%">
                                                        <div class="conceptcolumn1" style="width: 100%">
                                                                <label>
                                                                        Text Block:
                                                                </label>
                                                                <label>
                                                                        {{filteredtext[i]}}
                                                                </label>

                                                                <p-autoComplete [(ngModel)]="item.expressionItem"
                                                                        name="textblock" [size]="100" field="id"
                                                                        [suggestions]="filteredconcMat"
                                                                        (completeMethod)="filterConceptMatch($event)"
                                                                        placeholder="Search Term Name">
                                                                </p-autoComplete>
                                                                <button type="button" pButton
                                                                        (click)="removeTextBlock(i)"
                                                                        (keydown.enter)="removeTextBlock(i)"
                                                                        icon="pi pi-trash" styleClass="ui-button-info"
                                                                        pTooltip="Delete Term Name"></button>

                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <button type="button" pButton icon="pi pi-check"
                                                                (click)="addAnotherTextBlock()"
                                                                label="Add + Another Text Block"
                                                                class="ui-button-rounded ui-button-success"></button>
                                                </div>
                                        </div>
                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Dependent Terms" leftIcon="pi pi-user" rightIcon="pi pi-star">

                                <div style="padding-left: 20px">
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <p-checkbox
                                                                [(ngModel)]="derivedZeroExpressionForEdit.allTermsRequired"
                                                                binary="true" label="Dependent on all terms?">
                                                        </p-checkbox>
                                                </div>
                                        </div>
                                        <div *ngFor="let item of derivedZeroExpressionForEdit.depTermNameList; let i = index"
                                                [attr.data-index]="i">
                                                <div class="row" style="width: 100%">
                                                        <div class="conceptcolumn1" style="width: 100%">
                                                                <label>
                                                                        Term Name:
                                                                </label>
                                                        </div>

                                                        <div class="conceptcolumn2" style="width: 70%">
                                                                <p-autoComplete [(ngModel)]="item.expressionItem"
                                                                        name="formulaTermName" [size]="100"
                                                                        [suggestions]="formulaFilteredTerms"
                                                                        (completeMethod)="searchTermNames($event)"
                                                                        placeholder="Search Term Name"
                                                                        [dropdown]="true">
                                                                </p-autoComplete>
                                                                <button type="button" pButton
                                                                        (click)="removeDerivedTerm(i)"
                                                                        (keydown.enter)="removeDerivedTerm(i, false)"
                                                                        icon="pi pi-trash" styleClass="ui-button-info"
                                                                        pTooltip="Delete Term Entry"></button>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <button type="button" pButton icon="pi pi-check"
                                                                (click)="addAnotherItem(false)"
                                                                label="Add + Another Term"
                                                                class="ui-button-rounded ui-button-success"></button>
                                                </div>
                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Exclusive Terms" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="padding-left: 20px">

                                        <div *ngFor="let item of derivedZeroExpressionForEdit.excTermNameList; let i = index"
                                                [attr.data-index]="i">
                                                <div class="row" style="width: 100%">
                                                        <div class="conceptcolumn1" style="width: 100%">
                                                                <label>
                                                                        Term Name:
                                                                </label>
                                                        </div>

                                                        <div class="conceptcolumn2" style="width: 70%">
                                                                <p-autoComplete [(ngModel)]="item.expressionItem"
                                                                        name="formulaTermName" [size]="100"
                                                                        [suggestions]="formulaFilteredTerms"
                                                                        (completeMethod)="searchTermNames($event)"
                                                                        placeholder="Search Term Name"
                                                                        [dropdown]="true">
                                                                </p-autoComplete>
                                                                <button type="button" pButton
                                                                        (click)="removeDerivedTerm(i)"
                                                                        (keydown.enter)="removeDerivedTerm(i, true)"
                                                                        icon="pi pi-trash" styleClass="ui-button-info"
                                                                        pTooltip="Delete Term Entry"></button>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row" style="width: 100%">
                                                <div class="conceptcolumn1" style="width: 100%">
                                                        <button type="button" pButton icon="pi pi-check"
                                                                (click)="addAnotherItem(true)"
                                                                label="Add + Another Term"
                                                                class="ui-button-rounded ui-button-success"></button>
                                                </div>
                                        </div>

                                </div>
                        </p-tabPanel>
                        <p-tabPanel header="Exclusive Division->Sector" leftIcon="pi pi-user" rightIcon="pi pi-star">
                                <div style="width: 90%; padding-left: 20px">
                                        <div class="row">
                                                <div class="conceptcolumn1">
                                                        <label>Division -> Sector:</label>
                                                </div>
                                                <div class="column2">
                                                        <p-dropdown [options]="filteredDeriveddivSectors"
                                                                placeholder="Select Division Sector"
                                                                [(ngModel)]="deriveddivSector"
                                                                [style]="{'width':'800px'}"
                                                                dropdownIcon="pi pi-chevron-down"
                                                                (onChange)="derivedDivisionSeleted($event)"
                                                                [virtualScroll]="true" [itemSize]="31" filter="true">
                                                        </p-dropdown>
                                                        <label>
                                                                {{divisionCount}}
                                                        </label>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="conceptcolumn1">
                                                        <label>Industry: </label>

                                                </div>
                                                <div class="column2">
                                                        <p-dropdown [options]="filteredDerivedindustry"
                                                                placeholder="Select Industry"
                                                                [(ngModel)]="derivedindustry"
                                                                [style]="{'width':'800px'}"
                                                                dropdownIcon="pi pi-chevron-down"
                                                                (onChange)="industryChanged($event)" filter="true">
                                                        </p-dropdown>
                                                        <label>
                                                                {{sectorCount}}
                                                        </label>
                                                </div>
                                        </div>
                                </div>
                        </p-tabPanel>
                </p-tabView>
        </div>
        <p-footer>
                <button type="button" pButton icon="pi pi-check"
                        (click)="addEditDerived=false; saveNewDerivedExpression()"
                        label="Save Derived Expression"></button>
                <button type="button" pButton icon="pi pi-times" (click)="addEditDerived=false; " label="Cancel"
                        class="ui-button-secondary"></button>
        </p-footer>
</p-dialog>
